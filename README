

This repository contains the Terraform infrastructure and application deployment code for **Shared**, **Dev**, and **Prod** environments.


```
├── Infrastructure/environments
│   ├── shared/
│   ├── dev/
│   ├── prod/
├── APPLICATION/
│   ├── dev/
│   ├── prod/
---


The `INFRASTRUCTURE` folder contains all Terraform configurations for **Shared**, **Dev**, and **Prod** environments.

> ⚠️ **Important:** Peering connections exist from Shared → Dev and Shared → Prod. Proper Terraform run order is critical to avoid errors.

### Terraform Deployment Steps

1. **Shared Environment**

   * Navigate to the `shared/` folder.
   * **Comment out the peering connection block** in the Terraform files.

     > The peering block contains all peering-related resources including state pull, data blocks, and routes.
   * Run:

     ```bash
     terraform init
     terraform plan
     terraform apply
     ```

2. **Dev and Prod Environments**

   * Navigate to `dev/` and `prod/` folders.
   * **Comment out peering blocks** in these environments for the first run.
   * Run Terraform for each environment:

     ```bash
     terraform init
     terraform plan
     terraform apply
     ```

3. **Enable Peering**

   * After all three environments are successfully created:

     1. Uncomment the peering connection blocks in **Shared**, **Dev**, and **Prod** Terraform files.
     2. Apply Terraform in the following order:

        * Shared → Dev → Prod

     * Run for each:

       ```bash
       terraform plan
       terraform apply
       ```
   * This ensures that all peering connections are correctly established.

---

## APPLICATION

The `APPLICATION` folder contains:

* Applications for **Dev** and **Prod** environments
* Jenkinsfiles for **2 pipelines**:

  * Dev pipeline
  * Prod pipeline

These pipelines automate deployment and can be executed via Jenkins.

---

## Notes

* Always follow the Terraform run order when managing environments with peering.
* Make sure to version-control any changes in the peering blocks carefully.
* Ensure AWS credentials or IAM roles are correctly configured before running Terraform.
